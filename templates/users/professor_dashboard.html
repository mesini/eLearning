
{% load crispy_forms_tags %}
{% load staticfiles %}

{% block content %}
  <!-- Professor core css -->
  <link href="{% static "css/professor.css" %}" rel="stylesheet"/>
  <link href="{% static "css/breadcrumb.css" %}" rel="stylesheet"/>
  {% include 'head_css.html' %}
  {% include 'javascript.html' %} 

  <div class="container professor-panel-content">
  <div class="prof-course">
    <section class="bread-course" >
      <ul class="nav nav-tabs course_nav">
        <li><a  href="/">OpenBuild</a></li>
        <li class="active"><a data-toggle="tab" href="#courses">Courses</a></li>
        <li><a data-toggle="tab" href="#students">Students</a></li> 
      </ul>
    </section>
  </div>

  <div class="tab-content">
    <div id="courses" class="tab-pane in fade active">
      <div class="col-md-12">
        <div class="col-md-4">
          <form method='POST' action=''>
            {% csrf_token %}
            {{ add_course_form|crispy }}
            <input class='btn btn-primary' type='submit' value='Add course'/>
          </form>
        </div>
        <div class="col-md-12" >
          <h4>My Courses</h4>
            <div class="col-md-10">
              {% if queryset_course %} 
                {% for instance in queryset_course %}
                 <div class="panel-group">
                  <div class="panel panel-default ">
                    <div class="panel-heading">
                      <h4 class="panel-title">
                        <a data-toggle="collapse" href="#course{{instance.id}}">{{ instance.course_name }}</a>
                      </h4>
                    </div>
                    <div id="course{{instance.id}}" class="panel-collapse collapse">
                      <div class="panel-body">
                        <div class="col-md-12">
                        <!-- chapter form -->
                          <div class="col-md-12">
                            <div class="col-md-3">
                              <form method='POST' action=''>
                                {% csrf_token %}
                                {{ add_chapter_form|crispy }}
                                <input class='btn btn-primary' type='submit' value='Add chapter'/>
                              </form>
                            </div>
                          </div>
                          <!-- chapter_list -->
                          {% if queryset_chapter %}
                            <table class="table table-condensed table-hover generic-table">
                              <thead>
                              <tr>
                                <th>Chapter name</th>
                                <th>Date created</th>
                                <th>Actions</th>
                              </tr>
                              </thead>
                              {% for instance in queryset_chapter %}
                                <tr>
                                  <td class="col-md-5"><!-- <a href="{{ instance.get_absolute_url }}"> -->{{ instance.chapter_name }}<!-- </a> --></td>
                                  <td class="col-md-3">{{ instance.chapter_created_date }}</td>
                                  <td class="col-md-4">
                                   
                                    <a href="{{ instance.get_absolute_url }}">
                                      <input class='btn btn-primary btn-sm' type='submit' value='Add Lesson'/>
                                    </a>
                                    <a href="{% url 'edit_chapter' instance.course instance.slug %}">
                                      <input class='btn btn-primary btn-sm' type='submit' value='Rename'/>
                                    </a>
                                    <a href="{% url 'delete_chapter' instance.course instance.slug%}">
                                      <input onclick=" return confirm('Are you sure you wnt to delete {{instance.chapter_name}}')"
                                             class='btn btn-danger btn-sm' type='submit' value='Delete'/>
                                    </a>
                                  </td>
                                </tr>
                              {%endfor%}
                            </table>
                          {% endif %}
                        </div>
                      </div>
                      <div class="panel-footer">
                        <a href="{% url 'edit' instance.course_name %}">
                          <input class='btn btn-primary btn-sm' type='submit' value='Edit Course'/>
                        </a>
                        <a href="{% url 'delete' instance.course_name %}">
                          <input onclick=" return confirm('Are you sure you wnt to delete {{instance.course_name}}')"
                                 class='btn btn-danger btn-sm' type='submit' value='Delete Course'/>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
                {% endfor %}
              {% endif %}
            </div>
        </div>
      </div>
    </div>
    <div id="students" class="tab-pane fade ">
        <div class="container col-md-12">
    <div class="row">
      <div class="col-md-6">

        <form class="form-inline" method='GET' action="" role="form">
          <div class="form-group">
            <input class="form-control" type="text" name="q1" placeholder="Search students"
                   value="{{ request.GET.q }}"/>
            <button class="btn btn-danger btn-md">Submit</button>
          </div>
        </form>

        <h5>Available students:</h5>
        {% if excluded_students %}
          <table class="table table-condensed table-hover generic-table">
            <thead>
            <tr>
              <th>User name</th>
              <th>Action</th>
            </tr>
            </thead>
            {% for instance in excluded_students %}
              <tr>
                <td class="col-md-5" style="text-align: left">{{ instance.username }}</td>
                <td class="col-md-1"><a href="{% url 'add_students' course_name instance.id %}">
                  <input class='btn btn-primary btn-xs' type='submit' value='Add Student'/>
                </a>
                </td>
              </tr>
            {% endfor %}
          </table>
        {% endif %}
      </div>

      <div class="col-md-6">
        <form class="form-inline" method='GET' action="" role="form">
          <div class="form-group">
            <input class="form-control" type="text" name="q2" placeholder="Search students"
                   value="{{ request.GET.q }}"/>
            <button class="btn btn-danger btn-md">Submit</button>
          </div>
        </form>

        <h5>Added students:</h5>
        {% if added_students %}
          <table class="table table-condensed table-hover generic-table">
            <thead>
            <tr>
              <th>User name</th>
              <th>Action</th>
            </tr>
            </thead>
            {% for instance in added_students %}
              <tr>
                <td class="col-md-5" style="text-align: left">{{ instance.username }}</td>
                <td class="col-md-1"><a href="{% url 'remove_students' course_name instance.id %}">
                  <input class='btn btn-danger btn-xs' type='submit' value='Remove Student'/>
                </a>
                </td>
              </tr>
            {% endfor %}
          </table>
        {% endif %}
      </div>
    </div>
  </div>
    </div>
  </div>
</div>

{% endblock %}